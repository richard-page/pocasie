<!DOCTYPE html>
<html lang="sk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aktuálna situácia počasia</title>
</head>
<body>
    <h1>Aktuálna situácia počasia</h1>
    <p id="weather-description">Načítavam...</p>
    <p id="error-message" style="color:red; display:none;">Chyba pri načítaní údajov. Skúste to znova neskôr.</p>

    <script>
        // URL pre získanie aktuálnych údajov o počasí z OpenMeteo API (pre Bratislavu)
        const url = 'https://api.open-meteo.com/v1/forecast?latitude=48.1482&longitude=17.1067&current_weather=true';

        // Načítanie údajov z API
        fetch(url)
            .then(response => {
                if (!response.ok) {
                    throw new Error('Chyba pri načítaní údajov z API');
                }
                return response.json();
            })
            .then(data => {
                const weather = data.current_weather;

                // Dynamické generovanie popisu situácie podľa aktuálnych podmienok
                let description = "Situácia: ";

                // Určovanie tlakovej níže alebo výše
                const pressure = weather.pressure_msl;
                if (pressure < 1013) {
                    description += "Po prednej strane rozsiahlej tlakovej níže so stredom severne od Britských ostrovov prúdi teplý a vlhký vzduch do našej oblasti. ";
                } else if (pressure > 1020) {
                    description += "V oblasti je vysoký tlak, čo naznačuje stabilné a suché počasie. ";
                } else {
                    description += "Tlak je v normálnych medziach, takže počasie je vyvážené. ";
                }

                // Prispôsobenie podľa teploty a vlhkosti
                if (weather.temperature_2m > 25 && weather.humidity_2m > 60) {
                    description += "Počasie je teplé a vlhké, čo môže podporovať vznik búrok. ";
                } else if (weather.temperature_2m < 10) {
                    description += "Počasie je chladné a suché, búrky nie sú pravdepodobné. ";
                } else {
                    description += "Počasie je mierne, bez výrazných zmien. ";
                }

                // Určovanie smeru prúdenia vzduchu a vetra
                if (weather.wind_speed_10m > 15) {
                    description += "Vietor je silný, čo môže ovplyvniť pohyb vzduchu a komfort. ";
                } else {
                    description += "Vietor je slabý, počasie je pokojné. ";
                }

                // Zobrazenie popisu na stránke
                document.getElementById('weather-description').textContent = description;
            })
            .catch(error => {
                console.error("Chyba pri získavaní údajov:", error);
                document.getElementById('weather-description').textContent = "Nepodarilo sa načítať údaje o počasí. Skúste to znova.";
                document.getElementById('error-message').style.display = 'block';
            });
    </script>
</body>
</html>
